<script src="https://d3js.org/d3.v5.min.js"></script>

<body>

	asdf
</body>


<script>
  console.log(d3); // test if d3 is loaded

  // Add an SVG
  var width = 1600;
  var height = 800;

  var svg = d3.select("body")
	.append("svg")
	.attr("width", width)
	.attr("height", height);

  // Add Lines
  var distances = [{"x":1200, "y":100, "d": 50},
		        {"x":1200,"y":200, "d": 200},
		        {"x":1200,"y":300, "d": 120},
		        {"x":1200,"y":400, "d": 90},
		        {"x":1200,"y":500, "d": 150}];

  svg.selectAll("line")
  	.data(distances)
  	.enter()
  	.append('line')
  	.attr("x1", function(d){ return d.x + 10})
  	.attr("y1", function(d){ return d.y + 10})
  	.attr("x2", function(d){ return d.x + d.d + 10})
  	.attr("y2", function(d){ return d.y + 10})
  	.attr("stroke", "red")
  	.attr("stroke-width", 3);

  // Add Rectangles
  svg.selectAll("rect")
   	.data(distances)
   	.enter()
   	.append('rect')
  	.attr("x", function(x) {return x.x})
  	.attr("y", function(y) {return y.y})
  	.attr("width", 20)
  	.attr("height", 20)
  	.attr("fill", "blue")
  	.on("mouseover", function(d){
  		d3.select(this)
  		.transition()
  		.duration(500)
  		.attr("transform", "translate(" + d.d + ")")
  		.style("fill", "purple")
  	});

  // Add Circles
  var posCircle = [];
  var numberOfPoints = 20;
  var degrees = 2 * Math.PI / numberOfPoints;
  for(i = 0; i < numberOfPoints; i++){
  	var angle = degrees * i;
  	x  = (width/2) + 200 * Math.cos(angle);
	y = (height/2) + 200 * Math.sin(angle);
	posCircle.push([x, y])
  }

  var currentClickPos;
  var lastClickPos;

  svg.selectAll("circle")
   	.data(posCircle)
   	.enter()
   	.append('circle')
  	.attr("cx", function(x) {return x[0]})
  	.attr("cy", function(y) {return y[1]})
  	.attr("r", 15)
  	.attr("fill", "green")
  	.on('click', function(d){
  		currentClickPos = [d[0], d[1]];
  		drawLine();
  		//d3.select(this).on('click', null);
  	});

  // Add Polygons
  var part1a = [{"x":100, "y":250},
		        {"x":200,"y":350},
		        {"x":300,"y":350},
		        {"x":300,"y":250},
		        {"x":400,"y":200}];

  var part1b = [{"x":100, "y":250},
		        {"x":200,"y":300},
		        {"x":200,"y":250},
		        {"x":150,"y":200}];

  var part2a = [{"x":420, "y":150},
		        {"x":220,"y":250},
		        {"x":250,"y":350},
		        {"x":300,"y":300},
		        {"x":450,"y":250}];

  var part2b = [{"x":100,"y":350},
		        {"x":200,"y":350},
		        {"x":200,"y":300}];	

  var part3a = [{"x":400, "y":150},
		        {"x":300,"y":250},
		        {"x":250,"y":350},
		        {"x":100,"y":450},
		        {"x":250,"y":200}];

  var part3b = [{"x":100, "y":250},
		        {"x":100,"y":350},
		        {"x":200,"y":300}];

  var part1Number = 1;
  var part2Number = 1;
  var part3Number = 1;

  svg.append('polygon')
  	.data([part1a])
  	.attr("points", function(d){
  		return d.map(function(d){
  			return [d.x, d.y].join(",");
  		});
  	})
  	.attr("fill", "cyan")
  	.attr("stroke", "cyan")
  	.attr("stroke-width", 2)
  	.on("click", function(d){
  		if(part1Number == 1){
  		  	d3.select(this)
  			.data([part1b])
  			.attr("fill", "orange")
  			.attr("stroke", "orange")
  			.attr("points", function(d){
	  			return d.map(function(d){
	  				return [d.x, d.y].join(",");
	  			})
	  		});
	  		part1Number = 2;	
  		}
  		else{
  			d3.select(this)
  			.data([part1a])
  			.attr("fill", "cyan")
  			.attr("stroke", "cyan")
  			.attr("points", function(d){
	  			return d.map(function(d){
	  				return [d.x, d.y].join(",");
	  			})
	  		});
	  		part1Number = 1;
  		}

  	});

  svg.append('polygon')
   	.data([part2a])
  	.attr("points", function(d){
  		return d.map(function(d){
  			return [d.x, d.y].join(",");
  		});
  	})
  	.attr("fill", "brown")
  	.attr("stroke", "brown")
  	.attr("stroke-width", 2)
  	.on("click", function(d){
  		if(part2Number == 1){
  		  	d3.select(this)
  			.data([part2b])
  			.attr("fill", "orange")
  			.attr("stroke", "orange")
  			.attr("points", function(d){
	  			return d.map(function(d){
	  				return [d.x, d.y].join(",");
	  			})
	  		});
	  		part2Number = 2;	
  		}
  		else{
  			d3.select(this)
  			.data([part2a])
  			.attr("fill", "brown")
  			.attr("stroke", "brown")
  			.attr("points", function(d){
	  			return d.map(function(d){
	  				return [d.x, d.y].join(",");
	  			})
	  		});
	  		part2Number = 1;
  		}

  	});

  svg.append('polygon')
   	.data([part3a])
  	.attr("points", function(d){
  		return d.map(function(d){
  			return [d.x, d.y].join(",");
  		});
  	})
  	.attr("fill", "black")
  	.attr("stroke", "black")
  	.attr("stroke-width", 2)
  	.on("click", function(d){
  		if(part3Number == 1){
  		  	d3.select(this)
  			.data([part3b])
  			.attr("fill", "orange")
  			.attr("stroke", "orange")
  			.attr("points", function(d){
	  			return d.map(function(d){
	  				return [d.x, d.y].join(",");
	  			})
	  		});
	  		part3Number = 2;	
  		}
  		else{
  			d3.select(this)
  			.data([part3a])
  			.attr("fill", "black")
  			.attr("stroke", "black")
  			.attr("points", function(d){
	  			return d.map(function(d){
	  				return [d.x, d.y].join(",");
	  			})
	  		});
	  		part3Number = 1;
  		}

  	});

  function drawLine(){

  	if(lastClickPos != null){
  		svg.append('line')
		  	.attr("x1", lastClickPos[0])
		  	.attr("y1", lastClickPos[1])
		  	.attr("x2", currentClickPos[0])
		  	.attr("y2", currentClickPos[1])
		  	.attr("stroke", "red")
		  	.attr("stroke-width", 3);
		lastClickPos = null;
		currentClickPos = null;
  	}
  	else{
  		lastClickPos = currentClickPos;
  	}
  }


</script>